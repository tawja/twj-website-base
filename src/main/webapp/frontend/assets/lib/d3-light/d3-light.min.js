[].map||(Array.prototype.map=function(t,n){for(var e=this,r=e.length,u=[],i=0;r>i;)i in e&&(u[i]=t.call(n,e[i],i++,e));return u.lengh=r,u}),[].filter||(Array.prototype.filter=function(t,n,e,r,u){e=this,r=[];for(u in e)~~u+""==u&&u>=0&&t.call(n,e[u],+u,e)&&r.push(e[u]);return r}),[].forEach||(Array.prototype.forEach=function(t,n){for(var e=0,r=this.length;r>e;++e)t.call(n,this[e],e,this)});var d3=function(){function t(t){for(var n=1;t*n%1;)n*=10;return n}function n(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function e(t){var n=[t.a,t.b],e=[t.c,t.d],o=u(n),a=r(n,e),s=u(i(e,n,-a))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,o*=-1,a*=-1),this.rotate=(o?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*d3_degrees,this.translate=[t.e,t.f],this.scale=[o,s],this.skew=s?Math.atan2(a,s)*d3_degrees:0}function r(t,n){return t[0]*n[0]+t[1]*n[1]}function u(t){var n=Math.sqrt(r(t,t));return n&&(t[0]/=n,t[1]/=n),n}function i(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function o(t,n){return n-=t=+t,function(e){return t+n*e}}function a(t,n){var e,r=[],u=[],i=ln.transform(t),a=ln.transform(n),s=i.translate,c=a.translate,f=i.rotate,l=a.rotate,h=i.skew,g=a.skew,m=i.scale,p=a.scale;return s[0]!=c[0]||s[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:o(s[0],c[0])},{i:3,x:o(s[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:o(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),h!=g?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:o(h,g)}):g&&r.push(r.pop()+"skewX("+g+")"),m[0]!=p[0]||m[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:o(m[0],p[0])},{i:e-2,x:o(m[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(t){for(var n,i=-1;e>++i;)r[(n=u[i]).i]=n.x(t);return r.join("")}}function s(t,n){var e,r={},u={};for(e in t)e in n?r[e]=h(e)(t[e],n[e]):u[e]=t[e];for(e in n)e in t||(u[e]=n[e]);return function(t){for(e in r)u[e]=r[e](t);return u}}function c(t,n){var e,r=[],u=[],i=t.length,o=n.length,a=Math.min(t.length,n.length);for(e=0;a>e;++e)r.push(l(t[e],n[e]));for(;i>e;++e)u[e]=t[e];for(;o>e;++e)u[e]=n[e];return function(t){for(e=0;a>e;++e)u[e]=r[e](t);return u}}function f(t,n){var e,r,u,i,a,s=0,c=0,f=[],l=[];for(t+="",n+="",pn.lastIndex=0,r=0;e=pn.exec(n);++r)e.index&&f.push(n.substring(s,c=e.index)),l.push({i:f.length,x:e[0]}),f.push(null),s=pn.lastIndex;for(n.length>s&&f.push(n.substring(s)),r=0,i=l.length;(e=pn.exec(t))&&i>r;++r)if(a=l[r],a.x==e[0]){if(a.i)if(null==f[a.i+1])for(f[a.i-1]+=a.x,f.splice(a.i,1),u=r+1;i>u;++u)l[u].i--;else for(f[a.i-1]+=a.x+f[a.i+1],f.splice(a.i,2),u=r+1;i>u;++u)l[u].i-=2;else if(null==f[a.i+1])f[a.i]=a.x;else for(f[a.i]=a.x+f[a.i+1],f.splice(a.i+1,1),u=r+1;i>u;++u)l[u].i--;l.splice(r,1),i--,r--}else a.x=o(parseFloat(e[0]),parseFloat(a.x));for(;i>r;)a=l.pop(),null==f[a.i+1]?f[a.i]=a.x:(f[a.i]=a.x+f[a.i+1],f.splice(a.i+1,1)),i--;return 1===f.length?null==f[0]?(a=l[0].x,function(t){return a(t)+""}):function(){return n}:function(t){for(r=0;i>r;++r)f[(a=l[r]).i]=a.x(t);return f.join("")}}function l(t,n){for(var e,r=ln.interpolators.length;--r>=0&&!(e=ln.interpolators[r](t,n)););return e}function h(t){return"transform"==t?a:l}function g(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function m(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return(e-t)*n}}function p(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return Math.max(0,Math.min(1,(e-t)*n))}}function d(t,n){try{for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}catch(r){t.prototype=n}}function v(){}function y(t){return t}function M(t,n){var e=Math.pow(10,3*Math.abs(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function x(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function b(t){return t+""}function w(t,n,e,r){var u=e(t[0],t[1]),i=r(n[0],n[1]);return function(t){return i(u(t))}}function D(t,n){var e,r=0,u=t.length-1,i=t[r],o=t[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),(n=n(o-i))&&(t[r]=n.floor(i),t[u]=n.ceil(o)),t}function T(t,n,e,r){var u=[],i=[],o=0,a=Math.min(t.length,n.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());a>=++o;)u.push(e(t[o-1],t[o])),i.push(r(n[o-1],n[o]));return function(n){var e=ln.bisect(t,n,1,a)-1;return i[e](u[e](n))}}function _(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function C(t,n,e,r){function u(){var u=Math.min(t.length,n.length)>2?T:w,s=r?p:m;return o=u(t,n,s,e),a=u(n,t,s,l),i}function i(t){return o(t)}var o,a;return i.invert=function(t){return a(t)},i.domain=function(n){return arguments.length?(t=n.map(Number),u()):t},i.range=function(t){return arguments.length?(n=t,u()):n},i.rangeRound=function(t){return i.range(t).interpolate(g)},i.clamp=function(t){return arguments.length?(r=t,u()):r},i.interpolate=function(t){return arguments.length?(e=t,u()):e},i.ticks=function(n){return A(t,n)},i.tickFormat=function(n,e){return F(t,n,e)},i.nice=function(){return D(t,k),u()},i.copy=function(){return C(t,n,e,r)},u()}function Y(t,n){return ln.rebind(t,n,"range","rangeRound","interpolate","clamp")}function k(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}}function S(t,n){var e=_(t),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),i=n/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function A(t,n){return ln.range.apply(ln,S(t,n))}function F(t,n,e){var r=-Math.floor(Math.log(S(t,n)[2])/Math.LN10+.01);return ln.format(e?e.replace(wn,function(t,n,e,u,i,o,a,s,c,f){return[n,e,u,i,o,a,s,c||"."+(r-2*("%"===f)),f].join("")}):",."+r+"f")}function O(){return!0}function I(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function L(t,n,e){function r(n){var e=t(n),r=i(e,1);return r-n>n-e?e:r}function u(e){return n(e=t(new Yn(e-1)),1),e}function i(t,e){return n(t=new Yn(+t),e),t}function o(t,r,i){var o=u(t),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),n(o,1);else for(;r>o;)a.push(new Date(+o)),n(o,1);return a}function a(t,n,e){try{Yn=I;var r=new I;return r._=t,o(r,n,e)}finally{Yn=Date}}t.floor=t,t.round=r,t.ceil=u,t.offset=i,t.range=o;var s=t.utc=U(t);return s.floor=s,s.round=U(r),s.ceil=U(u),s.offset=U(i),s.range=a,t}function U(t){return function(n,e){try{Yn=I;var r=new I;return r._=n,t(r,e)._}finally{Yn=Date}}}function H(t,n,e,r){for(var u,i,o=0,a=n.length,s=e.length;a>o;){if(r>=s)return-1;if(u=n.charCodeAt(o++),37===u){if(i=Bn[n.charAt(o++)],!i||0>(r=i(t,e,r)))return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function E(t){return RegExp("^(?:"+t.map(ln.requote).join("|")+")","i")}function j(t){for(var n=new v,e=-1,r=t.length;r>++e;)n.set(t[e].toLowerCase(),e);return n}function z(t,n,e){t+="";var r=t.length;return e>r?Array(e-r+1).join(n)+t:t}function N(t,n,e){zn.lastIndex=0;var r=zn.exec(n.substring(e));return r?e+=r[0].length:-1}function X(t,n,e){jn.lastIndex=0;var r=jn.exec(n.substring(e));return r?e+=r[0].length:-1}function P(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.substring(e));return r?(t.m=qn.get(r[0].toLowerCase()),e+=r[0].length):-1}function q(t,n,e){Nn.lastIndex=0;var r=Nn.exec(n.substring(e));return r?(t.m=Xn.get(r[0].toLowerCase()),e+=r[0].length):-1}function G(t,n,e){return H(t,""+Rn.c,n,e)}function R(t,n,e){return H(t,""+Rn.x,n,e)}function B(t,n,e){return H(t,""+Rn.X,n,e)}function W(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+4));return r?(t.y=+r[0],e+=r[0].length):-1}function Z(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+2));return r?(t.y=$(+r[0]),e+=r[0].length):-1}function $(t){return t+(t>68?1900:2e3)}function V(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+2));return r?(t.m=r[0]-1,e+=r[0].length):-1}function J(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+2));return r?(t.d=+r[0],e+=r[0].length):-1}function K(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+2));return r?(t.H=+r[0],e+=r[0].length):-1}function Q(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+2));return r?(t.M=+r[0],e+=r[0].length):-1}function tn(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+2));return r?(t.S=+r[0],e+=r[0].length):-1}function nn(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e,e+3));return r?(t.L=+r[0],e+=r[0].length):-1}function en(t,n,e){var r=Zn.get(n.substring(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}function rn(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=~~(Math.abs(n)/60),u=Math.abs(n)%60;return e+z(r,"0",2)+z(u,"0",2)}function un(t,n,e){function r(n){return t(n)}return r.invert=function(n){return on(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(on)},r.nice=function(t){return r.domain(D(r.domain(),function(){return t}))},r.ticks=function(e,u){var i=_(r.domain());if("function"!=typeof e){var o=i[1]-i[0],a=o/e,s=ln.bisect($n,a);if(s==$n.length)return n.year(i,e);if(!s)return t.ticks(e).map(on);Math.log(a/$n[s-1])<Math.log($n[s]/a)&&--s,e=n[s],u=e[1],e=e[0].range}return e(i[0],new Date(+i[1]+1),u)},r.tickFormat=function(){return e},r.copy=function(){return un(t.copy(),n,e)},Y(r,t)}function on(t){return new Date(t)}function an(t){return function(n){for(var e=t.length-1,r=t[e];!r[1](n);)r=t[--e];return r[0](n)}}function sn(t){var n=new Date(t,0,1);return n.setFullYear(t),n}function cn(t){var n=t.getFullYear(),e=sn(n),r=sn(n+1);return n+(t-e)/(r-e)}function fn(t){return null!=t&&!isNaN(t)}var ln={version:"3.1.7"};ln.range=function(n,e,r){if(3>arguments.length&&(r=1,2>arguments.length&&(e=n,n=0)),1/0===(e-n)/r)throw Error("infinite range");var u,i=[],o=t(Math.abs(r)),a=-1;if(n*=o,e*=o,r*=o,0>r)for(;(u=n+r*++a)>e;)i.push(u/o);else for(;e>(u=n+r*++a);)i.push(u/o);return i},ln.rebind=function(t,e){for(var r,u=1,i=arguments.length;i>++u;)t[r=arguments[u]]=n(t,e,e[r]);return t};var hn=document,gn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ln.ns={prefix:gn,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.substring(0,n),t=t.substring(n+1)),gn.hasOwnProperty(e)?{space:gn[e],local:t}:t}},ln.transform=function(t){var n=hn.createElementNS(ln.ns.prefix.svg,"g");return(ln.transform=function(t){if(null!=t){n.setAttribute("transform",t);var r=n.transform.baseVal.consolidate()}return new e(r?r.matrix:mn)})(t)},e.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var mn={a:1,b:0,c:0,d:1,e:0,f:0};ln.interpolateNumber=o,ln.interpolateTransform=a,ln.interpolateObject=s,ln.interpolateArray=c,ln.interpolateString=f;var pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;ln.interpolate=l,ln.interpolators=[function(t,n){var e=typeof n;return("string"===e?f:"object"===e?Array.isArray(n)?c:s:o)(t,n)}],ln.interpolateRound=g,ln.map=function(t){var n=new v;for(var e in t)n.set(e,t[e]);return n},d(v,{has:function(t){return dn+t in this},get:function(t){return this[dn+t]},set:function(t,n){return this[dn+t]=n},remove:function(t){return t=dn+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(n){t.push(n)}),t},values:function(){var t=[];return this.forEach(function(n,e){t.push(e)}),t},entries:function(){var t=[];return this.forEach(function(n,e){t.push({key:n,value:e})}),t},forEach:function(t){for(var n in this)n.charCodeAt(0)===vn&&t.call(this,n.substring(1),this[n])}});var dn="\0",vn=dn.charCodeAt(0),yn=".",Mn=",",xn=[3,3],bn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(M);ln.formatPrefix=function(t,n){var e=0;return t&&(0>t&&(t*=-1),n&&(t=ln.round(t,x(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((0>=e?e+1:e-1)/3)))),bn[8+e/3]},ln.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)},ln.format=function(t){var n=wn.exec(t),e=n[1]||" ",r=n[2]||">",u=n[3]||"",i=n[4]||"",o=n[5],a=+n[6],s=n[7],c=n[8],f=n[9],l=1,h="",g=!1;switch(c&&(c=+c.substring(1)),(o||"0"===e&&"="===r)&&(o=e="0",r="=",s&&(a-=Math.floor((a-1)/4))),f){case"n":s=!0,f="g";break;case"%":l=100,h="%",f="f";break;case"p":l=100,h="%",f="r";break;case"b":case"o":case"x":case"X":i&&(i="0"+f.toLowerCase());case"c":case"d":g=!0,c=0;break;case"s":l=-1,f="r"}"#"===i&&(i=""),"r"!=f||c||(f="g"),null!=c&&("g"==f?c=Math.max(1,Math.min(21,c)):("e"==f||"f"==f)&&(c=Math.max(0,Math.min(20,c)))),f=Dn.get(f)||b;var m=o&&s;return function(t){if(g&&t%1)return"";var n=0>t||0===t&&0>1/t?(t=-t,"-"):u;if(0>l){var p=ln.formatPrefix(t,c);t=p.scale(t),h=p.symbol}else t*=l;t=f(t,c),!o&&s&&(t=Tn(t));var d=i.length+t.length+(m?0:n.length),v=a>d?Array(d=a-d+1).join(e):"";return m&&(t=Tn(v+t)),yn&&t.replace(".",yn),n+=i,("<"===r?n+t+v:">"===r?v+n+t:"^"===r?v.substring(0,d>>=1)+n+t+v.substring(d):n+(m?t:v+t))+h}};var wn=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Dn=ln.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=ln.round(t,x(t,n))).toFixed(Math.max(0,Math.min(20,x(t*(1+1e-15),n))))}}),Tn=y;if(xn){var _n=xn.length;Tn=function(t){for(var n=t.lastIndexOf("."),e=n>=0?"."+t.substring(n+1):(n=t.length,""),r=[],u=0,i=xn[0];n>0&&i>0;)r.push(t.substring(n-=i,n+i)),i=xn[u=(u+1)%_n];return r.reverse().join(Mn||"")+e}}ln.bisector=function(t){return{left:function(n,e,r,u){for(3>arguments.length&&(r=0),4>arguments.length&&(u=n.length);u>r;){var i=r+u>>>1;e>t.call(n,n[i],i)?r=i+1:u=i}return r},right:function(n,e,r,u){for(3>arguments.length&&(r=0),4>arguments.length&&(u=n.length);u>r;){var i=r+u>>>1;t.call(n,n[i],i)>e?u=i:r=i+1}return r}}};var Cn=ln.bisector(function(t){return t});ln.bisectLeft=Cn.left,ln.bisect=ln.bisectRight=Cn.right,ln.scale={},ln.scale.linear=function(){return C([0,1],[0,1],l,!1)},ln.time={};var Yn=Date,kn=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];I.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Sn.setUTCDate.apply(this._,arguments)},setDay:function(){Sn.setUTCDay.apply(this._,arguments)},setFullYear:function(){Sn.setUTCFullYear.apply(this._,arguments)},setHours:function(){Sn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Sn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Sn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Sn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Sn.setUTCSeconds.apply(this._,arguments)},setTime:function(){Sn.setTime.apply(this._,arguments)}};var Sn=Date.prototype;ln.time.year=L(function(t){return t=ln.time.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),ln.time.years=ln.time.year.range,ln.time.years.utc=ln.time.year.utc.range,ln.time.day=L(function(t){var n=new Yn(1970,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),ln.time.days=ln.time.day.range,ln.time.days.utc=ln.time.day.utc.range,ln.time.dayOfYear=function(t){var n=ln.time.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},ln.requote=function(t){return t.replace(An,"\\$&")};var An=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Fn="%a %e %b %X %Y",On="%d.%m.%Y",In="%H:%M:%S",Ln=Globalize.culture(__locale).calendar.days.names,Un=Globalize.culture(__locale).calendar.days.namesAbbr,Hn=Globalize.culture(__locale).calendar.months.names,En=Globalize.culture(__locale).calendar.months.namesAbbr;kn.forEach(function(t,n){t=t.toLowerCase(),n=7-n;var e=ln.time[t]=L(function(t){return(t=ln.time.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=ln.time.year(t).getDay();return Math.floor((ln.time.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});ln.time[t+"s"]=e.range,ln.time[t+"s"].utc=e.utc.range,ln.time[t+"OfYear"]=function(t){var e=ln.time.year(t).getDay();return Math.floor((ln.time.dayOfYear(t)+(e+n)%7)/7)}}),ln.time.week=ln.time.sunday,ln.time.weeks=ln.time.sunday.range,ln.time.weeks.utc=ln.time.sunday.utc.range,ln.time.weekOfYear=ln.time.sundayOfYear,ln.time.format=function(t){function n(n){for(var r,u,i,o=[],a=-1,s=0;e>++a;)37===t.charCodeAt(a)&&(o.push(t.substring(s,a)),null!=(u=Gn[r=t.charAt(++a)])&&(r=t.charAt(++a)),(i=Rn[r])&&(r=i(n,null==u?"e"===r?" ":"0":u)),o.push(r),s=a+1);return o.push(t.substring(s,a)),o.join("")}var e=t.length;return n.parse=function(n){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=H(e,t,n,0);if(r!=n.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var u=new Yn;return u.setFullYear(e.y,e.m,e.d),u.setHours(e.H,e.M,e.S,e.L),u},n.toString=function(){return t},n};var jn=E(Ln),zn=E(Un),Nn=E(Hn),Xn=j(Hn),Pn=E(En),qn=j(En),Gn={"-":"",_:" ",0:"0"},Rn={a:function(t){return Un[t.getDay()]},A:function(t){return Ln[t.getDay()]},b:function(t){return En[t.getMonth()]},B:function(t){return Hn[t.getMonth()]},c:ln.time.format(Fn),d:function(t,n){return z(t.getDate(),n,2)},e:function(t,n){return z(t.getDate(),n,2)},H:function(t,n){return z(t.getHours(),n,2)},I:function(t,n){return z(t.getHours()%12||12,n,2)},j:function(t,n){return z(1+ln.time.dayOfYear(t),n,3)},L:function(t,n){return z(t.getMilliseconds(),n,3)},m:function(t,n){return z(t.getMonth()+1,n,2)},M:function(t,n){return z(t.getMinutes(),n,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,n){return z(t.getSeconds(),n,2)},U:function(t,n){return z(ln.time.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return z(ln.time.mondayOfYear(t),n,2)},x:ln.time.format(On),X:ln.time.format(In),y:function(t,n){return z(t.getFullYear()%100,n,2)},Y:function(t,n){return z(t.getFullYear()%1e4,n,4)},Z:rn,"%":function(){return"%"}},Bn={a:N,A:X,b:P,B:q,c:G,d:J,e:J,H:K,I:K,L:nn,m:V,M:Q,p:en,S:tn,x:R,X:B,y:Z,Y:W},Wn=/^\s*\d+/,Zn=ln.map({am:0,pm:1});ln.time.hour=L(function(t){var n=t.getTimezoneOffset()/60;return new Yn(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),ln.time.hours=ln.time.hour.range,ln.time.hours.utc=ln.time.hour.utc.range,ln.time.minute=L(function(t){return new Yn(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),ln.time.minutes=ln.time.minute.range,ln.time.minutes.utc=ln.time.minute.utc.range,ln.time.month=L(function(t){return t=ln.time.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),ln.time.months=ln.time.month.range,ln.time.months.utc=ln.time.month.utc.range,ln.time.second=L(function(t){return new Yn(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),ln.time.seconds=ln.time.second.range,ln.time.seconds.utc=ln.time.second.utc.range;var $n=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Vn=[[ln.time.second,1],[ln.time.second,5],[ln.time.second,15],[ln.time.second,30],[ln.time.minute,1],[ln.time.minute,5],[ln.time.minute,15],[ln.time.minute,30],[ln.time.hour,1],[ln.time.hour,3],[ln.time.hour,6],[ln.time.hour,12],[ln.time.day,1],[ln.time.day,2],[ln.time.week,1],[ln.time.month,1],[ln.time.month,3],[ln.time.year,1]],Jn=[[ln.time.format("%Y"),O],[ln.time.format("%B"),function(t){return t.getMonth()}],[ln.time.format("%b %d"),function(t){return 1!=t.getDate()}],[ln.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[ln.time.format("%I %p"),function(t){return t.getHours()}],[ln.time.format("%I:%M"),function(t){return t.getMinutes()}],[ln.time.format(":%S"),function(t){return t.getSeconds()}],[ln.time.format(".%L"),function(t){return t.getMilliseconds()}]],Kn=ln.scale.linear(),Qn=an(Jn);return Vn.year=function(t,n){return Kn.domain(t.map(cn)).ticks(n).map(sn)},ln.time.scale=function(){return un(ln.scale.linear(),Vn,Qn)},ln.ascending=function(t,n){return n>t?-1:t>n?1:t>=n?0:0/0},ln.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),u=+t[r-1],i=e-r;return i?u+i*(t[r]-u):u},ln.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(fn),t.length?ln.quantile(t.sort(ln.ascending),.5):void 0},ln}();